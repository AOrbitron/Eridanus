"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{78147:function(mt,I,e){e.r(I),e.d(I,{default:function(){return ft}});var k=e(15009),S=e.n(k),G=e(97857),T=e.n(G),K=e(99289),O=e.n(K),X=e(5574),R=e.n(X),b=e(2618),Y=e(17788),M=e(87547),f=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},J=$,Q=e(57079);function j(){return j=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},j.apply(this,arguments)}const w=(r,n)=>f.createElement(Q.Z,j({},r,{ref:n,icon:J}));var q=f.forwardRef(w),c=e(1413),_=e(91),tt=e(89451),et=e(21532),nt=e(93967),rt=e.n(nt),ut=e(34994),E=e(4942),at=e(64847),it=function(n){return(0,E.Z)((0,E.Z)({},n.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:n.colorTextSecondary,fontSize:n.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,E.Z)({},"".concat(n.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function st(r){return(0,at.Xj)("LoginForm",function(n){var i=(0,c.Z)((0,c.Z)({},n),{},{componentCls:".".concat(r)});return[it(i)]})}var t=e(85893),lt=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function ot(r){var n,i=r.logo,o=r.message,A=r.contentStyle,m=r.title,F=r.subTitle,x=r.actions,U=r.children,V=r.containerStyle,D=r.otherStyle,s=(0,_.Z)(r,lt),Z=(0,tt.YB)(),y=s.submitter===!1?!1:(0,c.Z)((0,c.Z)({searchConfig:{submitText:Z.getMessage("loginForm.submitText","\u767B\u5F55")}},s.submitter),{},{submitButtonProps:(0,c.Z)({size:"large",style:{width:"100%"}},(n=s.submitter)===null||n===void 0?void 0:n.submitButtonProps),render:function(u,p){var z,vt=p.pop();if(typeof(s==null||(z=s.submitter)===null||z===void 0?void 0:z.render)=="function"){var C,P;return s==null||(C=s.submitter)===null||C===void 0||(P=C.render)===null||P===void 0?void 0:P.call(C,u,p)}return vt}}),L=(0,f.useContext)(et.ZP.ConfigContext),d=L.getPrefixCls("pro-form-login"),h=st(d),g=h.wrapSSR,l=h.hashId,a=function(u){return"".concat(d,"-").concat(u," ").concat(l)},v=(0,f.useMemo)(function(){return i?typeof i=="string"?(0,t.jsx)("img",{src:i}):i:null},[i]);return g((0,t.jsxs)("div",{className:rt()(a("container"),l),style:V,children:[(0,t.jsxs)("div",{className:"".concat(a("top")," ").concat(l).trim(),children:[m||v?(0,t.jsxs)("div",{className:"".concat(a("header")),children:[v?(0,t.jsx)("span",{className:a("logo"),children:v}):null,m?(0,t.jsx)("span",{className:a("title"),children:m}):null]}):null,F?(0,t.jsx)("div",{className:a("desc"),children:F}):null]}),(0,t.jsxs)("div",{className:a("main"),style:(0,c.Z)({width:328},A),children:[(0,t.jsxs)(ut.A,(0,c.Z)((0,c.Z)({isKeyPressSubmit:!0},s),{},{submitter:y,children:[o,U]})),x?(0,t.jsx)("div",{className:a("main-other"),style:D,children:x}):null]})]}))}var N=e(5966),B=e(76772),H=e(2453),ct=e(67610),dt=e(73935),ht=e(91094),gt=function(){var n,i=(0,B.useModel)("@@initialState"),o=i.initialState,A=i.setInitialState,m=o==null||(n=o.settings)===null||n===void 0?void 0:n.isDark,F=(0,f.useState)({}),x=R()(F,2),U=x[0],V=x[1],D=(0,f.useState)(!1),s=R()(D,2),Z=s[0],y=s[1],L=function(){var d=O()(S()().mark(function h(g){var l,a,v;return S()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,g.password=(0,ht.sha3_256)(g.password||""),u.next=4,(0,b.n$)(g);case 4:if(l=u.sent,!l.error){u.next=10;break}return H.ZP.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF"),u.abrupt("return");case 10:return localStorage.setItem("auth_token",l.auth_token?l.auth_token:""),document.cookie="auth_token=".concat(l.auth_token),u.next=14,(0,b.ts)();case 14:return a=u.sent,(0,dt.flushSync)(function(){A(function(p){return T()(T()({},p),{},{currentUser:a})})}),H.ZP.success("\u767B\u5F55\u6210\u529F"),v=new URL(window.location.href).searchParams,B.history.push(v.get("redirect")||"/"),u.abrupt("return");case 20:u.next=24;break;case 22:u.prev=22,u.t0=u.catch(0);case 24:case"end":return u.stop()}},h,null,[[0,22]])}));return function(g){return d.apply(this,arguments)}}();return(0,f.useEffect)(function(){},[]),(0,t.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1e3,background:m?"#1f1f1f":"#f5f5f5"},children:[(0,t.jsx)(B.Helmet,{children:(0,t.jsxs)("title",{children:["\u767B\u5F55"," - ",ct.Z.title]})}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(ot,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/icons/icon-192x192.png"}),title:"Eridanus WebUI",subTitle:"\u8BF7\u767B\u5F55",initialValues:{autoLogin:!0},onFinish:function(){var d=O()(S()().mark(function h(g){return S()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L(g);case 2:case"end":return a.stop()}},h)}));return function(h){return d.apply(this,arguments)}}(),children:[(0,t.jsx)(N.Z,{name:"account",fieldProps:{size:"large",prefix:(0,t.jsx)(M.Z,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,t.jsx)(N.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(q,{})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,t.jsx)("a",{style:{float:"right",marginBottom:"20px"},onClick:function(){return y(!0)},children:"\u4E0D\u77E5\u9053/\u5FD8\u8BB0\u8D26\u6237\u5BC6\u7801\uFF1F"}),(0,t.jsxs)(Y.Z,{title:"\u8D26\u6237\u5BC6\u7801\u5E2E\u52A9",open:Z,onCancel:function(){return y(!1)},footer:null,centered:!0,children:[(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u8D26\u6237\u5BC6\u7801\u5747\u4E3A\uFF1A",(0,t.jsx)("h1",{style:{textAlign:"center"},children:"eridanus"})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u5FD8\u8BB0\u4E86\u8D26\u6237\u548C\u5BC6\u7801\uFF0C\u8BF7\u5728",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" Eridanus "}),"\u76EE\u5F55\u4E0B\uFF0C\u627E\u5230",(0,t.jsx)("strong",{style:{fontSize:"1.5rem"},children:" user_info.yaml "}),"\u6587\u4EF6\uFF0C\u5C06\u5176\u5220\u9664\u3002\u7136\u540E\u91CD\u542F\u670D\u52A1\u7AEF\uFF0C\u8D26\u6237\u5BC6\u7801\u6062\u590D\u4E3A\u9ED8\u8BA4\u3002"]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("p",{children:["\u5982\u679C\u60A8\u6709\u516C\u7F51\u8BBF\u95EE\u7684\u9700\u8981\uFF0C\u4E3A\u4E86\u5B89\u5168\u8D77\u89C1\uFF0C\u8BF7\u52A1\u5FC5\u5728\u767B\u5F55\u540E\uFF0C\u627E\u5230\u9876\u90E8\u5DE5\u5177\u680F\u53F3\u4E0A\u89D2\u7684  ",(0,t.jsx)(M.Z,{style:{fontSize:"2rem"}}),"  \u6309\u94AE\uFF0C\u7ACB\u5373\u4FEE\u6539\u8D26\u6237\u5BC6\u7801\uFF01"]})]})]})})]})},ft=gt}}]);
